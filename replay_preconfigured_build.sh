#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "$0")" && pwd)"
BUILD_DIR="$ROOT_DIR/preconfigured/X64_verified"

VENV_DIR="$ROOT_DIR/.venv"
if [ ! -f "$VENV_DIR/bin/activate" ]; then
    python3 -m venv "$VENV_DIR"
fi
"$VENV_DIR/bin/pip" install jinja2 >/dev/null
# shellcheck disable=SC1091
source "$VENV_DIR/bin/activate"

# Pre-create directories referenced by commands
DIRS=(
  CMakeFiles/kernel.elf.dir
  CMakeFiles/kernel.elf.dir/src/arch/x86
  CMakeFiles/kernel.elf.dir/src/arch/x86/64
  CMakeFiles/kernel_all_pp_prune_wrapper_temp_lib.dir
  CMakeFiles/kernel_bf_gen_target_111_pbf_temp_lib.dir
  CMakeFiles/kernel_bf_gen_target_11_pbf_temp_lib.dir
  CMakeFiles/kernel_bf_gen_target_1_pbf_temp_lib.dir
  CMakeFiles/kernel_i_wrapper_temp_lib.dir
  CMakeFiles/linker_ld_wrapper_temp_lib.dir
  arch_include/x86/sel4/arch
  gen_config/kernel
  gen_headers/api
  gen_headers/arch/api
  generated
  generated/arch/object
  generated/plat_mode/machine
  generated/sel4
  generated_prune/arch/object
  generated_prune/plat_mode/machine
  generated_prune/sel4
  include/interfaces
  include/sel4
  libsel4
  libsel4/CMakeFiles/libsel4_sel4_arch_types_gen_pbf_temp_lib.dir
  libsel4/CMakeFiles/libsel4_shared_types_gen_pbf_temp_lib.dir
  libsel4/include/sel4
  libsel4/sel4_arch_include/x86_64/sel4/sel4_arch
  sel4_arch_include/x86_64/sel4/sel4_arch
)

mkdir -p "$BUILD_DIR"
for d in "${DIRS[@]}"; do
    mkdir -p "$BUILD_DIR/$d"
done


cd "$BUILD_DIR"
cd "$ROOT_DIR"/preconfigured/X64_verified && /usr/bin/cmake -E touch "$ROOT_DIR"/preconfigured/X64_verified/generated_prune/plat_mode/machine/hardware_gen.h "$ROOT_DIR"/preconfigured/X64_verified/generated_prune/arch/object/structures_gen.h "$ROOT_DIR"/preconfigured/X64_verified/generated_prune/sel4/shared_types_gen.h
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/libsel4/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/libsel4/gen_config -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -P -MD -MT libsel4/CMakeFiles/libsel4_shared_types_gen_pbf_temp_lib.dir/libsel4_shared_types_gen_pbf_temp.c.obj -MF libsel4/CMakeFiles/libsel4_shared_types_gen_pbf_temp_lib.dir/libsel4_shared_types_gen_pbf_temp.c.obj.d -o libsel4/CMakeFiles/libsel4_shared_types_gen_pbf_temp_lib.dir/libsel4_shared_types_gen_pbf_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/libsel4/libsel4_shared_types_gen_pbf_temp.c
cd "$ROOT_DIR"/preconfigured/X64_verified && "$ROOT_DIR"/tools/cpp_gen.sh "$ROOT_DIR"/src/api/faults.c "$ROOT_DIR"/src/api/syscall.c "$ROOT_DIR"/src/arch/x86/64/c_traps.c "$ROOT_DIR"/src/arch/x86/64/kernel/elf.c "$ROOT_DIR"/src/arch/x86/64/kernel/thread.c "$ROOT_DIR"/src/arch/x86/64/kernel/vspace.c "$ROOT_DIR"/src/arch/x86/64/machine/capdl.c "$ROOT_DIR"/src/arch/x86/64/machine/registerset.c "$ROOT_DIR"/src/arch/x86/64/model/smp.c "$ROOT_DIR"/src/arch/x86/64/model/statedata.c "$ROOT_DIR"/src/arch/x86/64/object/objecttype.c "$ROOT_DIR"/src/arch/x86/64/smp/ipi.c "$ROOT_DIR"/src/arch/x86/api/faults.c "$ROOT_DIR"/src/arch/x86/benchmark/benchmark.c "$ROOT_DIR"/src/arch/x86/c_traps.c "$ROOT_DIR"/src/arch/x86/idle.c "$ROOT_DIR"/src/arch/x86/kernel/apic.c "$ROOT_DIR"/src/arch/x86/kernel/boot.c "$ROOT_DIR"/src/arch/x86/kernel/boot_sys.c "$ROOT_DIR"/src/arch/x86/kernel/cmdline.c "$ROOT_DIR"/src/arch/x86/kernel/ept.c "$ROOT_DIR"/src/arch/x86/kernel/smp_sys.c "$ROOT_DIR"/src/arch/x86/kernel/thread.c "$ROOT_DIR"/src/arch/x86/kernel/vspace.c "$ROOT_DIR"/src/arch/x86/kernel/x2apic.c "$ROOT_DIR"/src/arch/x86/kernel/xapic.c "$ROOT_DIR"/src/arch/x86/machine/breakpoint.c "$ROOT_DIR"/src/arch/x86/machine/capdl.c "$ROOT_DIR"/src/arch/x86/machine/cpu_identification.c "$ROOT_DIR"/src/arch/x86/machine/fpu.c "$ROOT_DIR"/src/arch/x86/machine/hardware.c "$ROOT_DIR"/src/arch/x86/machine/registerset.c "$ROOT_DIR"/src/arch/x86/model/statedata.c "$ROOT_DIR"/src/arch/x86/object/interrupt.c "$ROOT_DIR"/src/arch/x86/object/ioport.c "$ROOT_DIR"/src/arch/x86/object/iospace.c "$ROOT_DIR"/src/arch/x86/object/objecttype.c "$ROOT_DIR"/src/arch/x86/object/tcb.c "$ROOT_DIR"/src/arch/x86/object/vcpu.c "$ROOT_DIR"/src/arch/x86/smp/ipi.c "$ROOT_DIR"/src/assert.c "$ROOT_DIR"/src/benchmark/benchmark.c "$ROOT_DIR"/src/benchmark/benchmark_track.c "$ROOT_DIR"/src/benchmark/benchmark_utilisation.c "$ROOT_DIR"/src/fastpath/fastpath.c "$ROOT_DIR"/src/inlines.c "$ROOT_DIR"/src/kernel/boot.c "$ROOT_DIR"/src/kernel/cspace.c "$ROOT_DIR"/src/kernel/faulthandler.c "$ROOT_DIR"/src/kernel/stack.c "$ROOT_DIR"/src/kernel/thread.c "$ROOT_DIR"/src/machine/capdl.c "$ROOT_DIR"/src/machine/fpu.c "$ROOT_DIR"/src/machine/io.c "$ROOT_DIR"/src/machine/registerset.c "$ROOT_DIR"/src/model/preemption.c "$ROOT_DIR"/src/model/smp.c "$ROOT_DIR"/src/model/statedata.c "$ROOT_DIR"/src/object/cnode.c "$ROOT_DIR"/src/object/endpoint.c "$ROOT_DIR"/src/object/interrupt.c "$ROOT_DIR"/src/object/notification.c "$ROOT_DIR"/src/object/objecttype.c "$ROOT_DIR"/src/object/tcb.c "$ROOT_DIR"/src/object/untyped.c "$ROOT_DIR"/src/plat/pc99/machine/acpi.c "$ROOT_DIR"/src/plat/pc99/machine/hardware.c "$ROOT_DIR"/src/plat/pc99/machine/intel-vtd.c "$ROOT_DIR"/src/plat/pc99/machine/io.c "$ROOT_DIR"/src/plat/pc99/machine/ioapic.c "$ROOT_DIR"/src/plat/pc99/machine/pic.c "$ROOT_DIR"/src/plat/pc99/machine/pit.c "$ROOT_DIR"/src/smp/ipi.c "$ROOT_DIR"/src/smp/lock.c "$ROOT_DIR"/src/string.c "$ROOT_DIR"/src/util.c "$ROOT_DIR"/src/config/default_domain.c > kernel_all.c
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/libsel4/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/libsel4/gen_config -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -P -MD -MT libsel4/CMakeFiles/libsel4_sel4_arch_types_gen_pbf_temp_lib.dir/libsel4_sel4_arch_types_gen_pbf_temp.c.obj -MF libsel4/CMakeFiles/libsel4_sel4_arch_types_gen_pbf_temp_lib.dir/libsel4_sel4_arch_types_gen_pbf_temp.c.obj.d -o libsel4/CMakeFiles/libsel4_sel4_arch_types_gen_pbf_temp_lib.dir/libsel4_sel4_arch_types_gen_pbf_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/libsel4/libsel4_sel4_arch_types_gen_pbf_temp.c
cd "$ROOT_DIR"/preconfigured/X64_verified && rm -f "$ROOT_DIR"/preconfigured/X64_verified/generated/invocations_all.json && python3 "$ROOT_DIR"/tools/invocation_json_gen.py --gen_config "$ROOT_DIR"/preconfigured/X64_verified/gen_config/kernel/gen_config.json --invocations "$ROOT_DIR"/libsel4/include/interfaces/object-api.xml --arch_invocations "$ROOT_DIR"/libsel4/arch_include/x86/interfaces/object-api-arch.xml --sel4_arch_invocations "$ROOT_DIR"/libsel4/sel4_arch_include/x86_64/interfaces/object-api-sel4-arch.xml --dest "$ROOT_DIR"/preconfigured/X64_verified/generated/invocations_all.json
cd "$ROOT_DIR"/preconfigured/X64_verified && rm -f gen_headers/arch/api/invocation.h && python3 "$ROOT_DIR"/tools/invocation_header_gen.py --xml "$ROOT_DIR"/libsel4/arch_include/x86/interfaces/object-api-arch.xml --arch --dest gen_headers/arch/api/invocation.h
cd "$ROOT_DIR"/preconfigured/X64_verified && rm -f gen_headers/api/invocation.h && python3 "$ROOT_DIR"/tools/invocation_header_gen.py --xml "$ROOT_DIR"/libsel4/include/interfaces/object-api.xml --dest gen_headers/api/invocation.h
cd "$ROOT_DIR"/preconfigured/X64_verified && rm -f gen_headers/arch/api/sel4_invocation.h && python3 "$ROOT_DIR"/tools/invocation_header_gen.py --xml "$ROOT_DIR"/libsel4/sel4_arch_include/x86_64/interfaces/object-api-sel4-arch.xml --sel4_arch --dest gen_headers/arch/api/sel4_invocation.h
cd "$ROOT_DIR"/preconfigured/X64_verified/libsel4 && python3 "$ROOT_DIR"/tools/bitfield_gen.py --environment libsel4 --from_file "$ROOT_DIR"/libsel4/mode_include/64/sel4/shared_types.bf "$ROOT_DIR"/preconfigured/X64_verified/libsel4/include/sel4/shared_types.pbf "$ROOT_DIR"/preconfigured/X64_verified/libsel4/include/sel4/shared_types_gen.h
# Kernel syscall header is checked in; header generation skipped
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -CC -I"$ROOT_DIR"/preconfigured/X64_verified/generated_prune -MD -MT CMakeFiles/kernel_all_pp_prune_wrapper_temp_lib.dir/kernel_all_pp_prune_wrapper_temp.c.obj -MF CMakeFiles/kernel_all_pp_prune_wrapper_temp_lib.dir/kernel_all_pp_prune_wrapper_temp.c.obj.d -o CMakeFiles/kernel_all_pp_prune_wrapper_temp_lib.dir/kernel_all_pp_prune_wrapper_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/kernel_all_pp_prune_wrapper_temp.c
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -P -MD -MT CMakeFiles/kernel_bf_gen_target_1_pbf_temp_lib.dir/kernel_bf_gen_target_1_pbf_temp.c.obj -MF CMakeFiles/kernel_bf_gen_target_1_pbf_temp_lib.dir/kernel_bf_gen_target_1_pbf_temp.c.obj.d -o CMakeFiles/kernel_bf_gen_target_1_pbf_temp_lib.dir/kernel_bf_gen_target_1_pbf_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/kernel_bf_gen_target_1_pbf_temp.c
cd "$ROOT_DIR"/preconfigured/X64_verified/libsel4 && python3 "$ROOT_DIR"/tools/bitfield_gen.py --environment libsel4 --from_file "$ROOT_DIR"/libsel4/sel4_arch_include/x86_64/sel4/sel4_arch/types.bf "$ROOT_DIR"/preconfigured/X64_verified/libsel4/sel4_arch_include/x86_64/sel4/sel4_arch/types.pbf "$ROOT_DIR"/preconfigured/X64_verified/libsel4/sel4_arch_include/x86_64/sel4/sel4_arch/types_gen.h
cd "$ROOT_DIR"/preconfigured/X64_verified/libsel4 && rm -f arch_include/x86/sel4/arch/invocation.h && python3 "$ROOT_DIR"/tools/invocation_header_gen.py --xml "$ROOT_DIR"/libsel4/arch_include/x86/interfaces/object-api-arch.xml --libsel4 --arch --dest arch_include/x86/sel4/arch/invocation.h
cd "$ROOT_DIR"/preconfigured/X64_verified/libsel4 && rm -f include/interfaces/sel4_client.h && python3 "$ROOT_DIR"/libsel4/tools/syscall_stub_gen.py -a x86_64 -o include/interfaces/sel4_client.h "$ROOT_DIR"/libsel4/sel4_arch_include/x86_64/interfaces/object-api-sel4-arch.xml "$ROOT_DIR"/libsel4/arch_include/x86/interfaces/object-api-arch.xml "$ROOT_DIR"/libsel4/include/interfaces/object-api.xml
cd "$ROOT_DIR"/preconfigured/X64_verified/libsel4 && rm -f include/sel4/invocation.h && python3 "$ROOT_DIR"/tools/invocation_header_gen.py --xml "$ROOT_DIR"/libsel4/include/interfaces/object-api.xml --libsel4 --dest include/sel4/invocation.h
cd "$ROOT_DIR"/preconfigured/X64_verified/libsel4 && rm -f sel4_arch_include/x86_64/sel4/sel4_arch/invocation.h && python3 "$ROOT_DIR"/tools/invocation_header_gen.py --xml "$ROOT_DIR"/libsel4/sel4_arch_include/x86_64/interfaces/object-api-sel4-arch.xml --libsel4 --sel4_arch --dest sel4_arch_include/x86_64/sel4/sel4_arch/invocation.h
# libsel4 syscall header is checked in; header generation skipped
cd "$ROOT_DIR"/preconfigured/X64_verified && python3 "$ROOT_DIR"/tools/bitfield_gen.py --prune "$ROOT_DIR"/preconfigured/X64_verified/kernel_all_pp_prune.c --from_file "$ROOT_DIR"/include/plat/pc99/plat/64/plat_mode/machine/hardware.bf "$ROOT_DIR"/preconfigured/X64_verified/generated/plat_mode/machine/hardware.bf.pbf "$ROOT_DIR"/preconfigured/X64_verified/generated/plat_mode/machine/hardware_gen.h
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -P -MD -MT CMakeFiles/kernel_bf_gen_target_11_pbf_temp_lib.dir/kernel_bf_gen_target_11_pbf_temp.c.obj -MF CMakeFiles/kernel_bf_gen_target_11_pbf_temp_lib.dir/kernel_bf_gen_target_11_pbf_temp.c.obj.d -o CMakeFiles/kernel_bf_gen_target_11_pbf_temp_lib.dir/kernel_bf_gen_target_11_pbf_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/kernel_bf_gen_target_11_pbf_temp.c
cd "$ROOT_DIR"/preconfigured/X64_verified && python3 "$ROOT_DIR"/tools/bitfield_gen.py --prune "$ROOT_DIR"/preconfigured/X64_verified/kernel_all_pp_prune.c --from_file "$ROOT_DIR"/include/arch/x86/arch/object/structures.bf "$ROOT_DIR"/preconfigured/X64_verified/generated/arch/object/structures.bf.pbf "$ROOT_DIR"/preconfigured/X64_verified/generated/arch/object/structures_gen.h
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -P -MD -MT CMakeFiles/kernel_bf_gen_target_111_pbf_temp_lib.dir/kernel_bf_gen_target_111_pbf_temp.c.obj -MF CMakeFiles/kernel_bf_gen_target_111_pbf_temp_lib.dir/kernel_bf_gen_target_111_pbf_temp.c.obj.d -o CMakeFiles/kernel_bf_gen_target_111_pbf_temp_lib.dir/kernel_bf_gen_target_111_pbf_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/kernel_bf_gen_target_111_pbf_temp.c
cd "$ROOT_DIR"/preconfigured/X64_verified && python3 "$ROOT_DIR"/tools/bitfield_gen.py --prune "$ROOT_DIR"/preconfigured/X64_verified/kernel_all_pp_prune.c --from_file "$ROOT_DIR"/libsel4/mode_include/64/sel4/shared_types.bf "$ROOT_DIR"/preconfigured/X64_verified/generated/sel4/shared_types.bf.pbf "$ROOT_DIR"/preconfigured/X64_verified/generated/sel4/shared_types_gen.h
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -CC -P -I"$ROOT_DIR"/preconfigured/X64_verified/generated -MD -MT CMakeFiles/linker_ld_wrapper_temp_lib.dir/linker_ld_wrapper_temp.c.obj -MF CMakeFiles/linker_ld_wrapper_temp_lib.dir/linker_ld_wrapper_temp.c.obj.d -o CMakeFiles/linker_ld_wrapper_temp_lib.dir/linker_ld_wrapper_temp.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/linker_ld_wrapper_temp.c
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -E -CC -I"$ROOT_DIR"/preconfigured/X64_verified/generated -MD -MT CMakeFiles/kernel_i_wrapper_temp_lib.dir/kernel_all_copy.c.obj -MF CMakeFiles/kernel_i_wrapper_temp_lib.dir/kernel_all_copy.c.obj.d -o CMakeFiles/kernel_i_wrapper_temp_lib.dir/kernel_all_copy.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/kernel_all_copy.c
cd "$ROOT_DIR"/preconfigured/X64_verified && python3 "$ROOT_DIR"/tools/circular_includes.py --ignore kernel_all_copy.c < kernel_all.i && touch circular_includes_valid
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/generated -Wa,--64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -MD -MT CMakeFiles/kernel.elf.dir/src/arch/x86/multiboot.S.obj -MF CMakeFiles/kernel.elf.dir/src/arch/x86/multiboot.S.obj.d -o CMakeFiles/kernel.elf.dir/src/arch/x86/multiboot.S.obj -c "$ROOT_DIR"/src/arch/x86/multiboot.S
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/generated -Wa,--64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -MD -MT CMakeFiles/kernel.elf.dir/src/arch/x86/64/traps.S.obj -MF CMakeFiles/kernel.elf.dir/src/arch/x86/64/traps.S.obj.d -o CMakeFiles/kernel.elf.dir/src/arch/x86/64/traps.S.obj -c "$ROOT_DIR"/src/arch/x86/64/traps.S
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/generated -Wa,--64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -MD -MT CMakeFiles/kernel.elf.dir/src/arch/x86/64/machine_asm.S.obj -MF CMakeFiles/kernel.elf.dir/src/arch/x86/64/machine_asm.S.obj.d -o CMakeFiles/kernel.elf.dir/src/arch/x86/64/machine_asm.S.obj -c "$ROOT_DIR"/src/arch/x86/64/machine_asm.S
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/generated -Wa,--64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -MD -MT CMakeFiles/kernel.elf.dir/src/arch/x86/64/head.S.obj -MF CMakeFiles/kernel.elf.dir/src/arch/x86/64/head.S.obj.d -o CMakeFiles/kernel.elf.dir/src/arch/x86/64/head.S.obj -c "$ROOT_DIR"/src/arch/x86/64/head.S
/usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified  -I"$ROOT_DIR"/include -I"$ROOT_DIR"/include/64 -I"$ROOT_DIR"/include/arch/x86 -I"$ROOT_DIR"/include/arch/x86/arch/64 -I"$ROOT_DIR"/include/plat/pc99 -I"$ROOT_DIR"/include/plat/pc99/plat/64 -I"$ROOT_DIR"/libsel4/include -I"$ROOT_DIR"/libsel4/arch_include/x86 -I"$ROOT_DIR"/libsel4/sel4_arch_include/x86_64 -I"$ROOT_DIR"/libsel4/sel4_plat_include/pc99 -I"$ROOT_DIR"/libsel4/mode_include/64 -I"$ROOT_DIR"/preconfigured/X64_verified/gen_config -I"$ROOT_DIR"/preconfigured/X64_verified/autoconf -I"$ROOT_DIR"/preconfigured/X64_verified/gen_headers -I"$ROOT_DIR"/preconfigured/X64_verified/generated -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -std=c99 -Wall -Werror -Wstrict-prototypes -Wmissing-prototypes -Wnested-externs -Wmissing-declarations -Wundef -Wpointer-arith -Wno-nonnull -nostdinc -ffreestanding -fno-stack-protector -fno-asynchronous-unwind-tables -fno-common -O2 -nostdlib -fno-pic -fno-pie -mcmodel=kernel -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -MD -MT CMakeFiles/kernel.elf.dir/kernel_all.c.obj -MF CMakeFiles/kernel.elf.dir/kernel_all.c.obj.d -o CMakeFiles/kernel.elf.dir/kernel_all.c.obj -c "$ROOT_DIR"/preconfigured/X64_verified/kernel_all.c
: && /usr/bin/ccache /usr/bin/gcc --sysroot="$ROOT_DIR"/preconfigured/X64_verified -m64  -D__KERNEL_64__ -march=nehalem -O3 -DNDEBUG -D__KERNEL_64__ -march=nehalem  -Wl,-m,elf_x86_64  -static -Wl,--build-id=none -Wl,-n -O2  -nostdlib  -fno-pic  -fno-pie  -mcmodel=kernel     -Wl,-T "$ROOT_DIR"/preconfigured/X64_verified/linker.lds_pp CMakeFiles/kernel.elf.dir/src/arch/x86/multiboot.S.obj CMakeFiles/kernel.elf.dir/src/arch/x86/64/machine_asm.S.obj CMakeFiles/kernel.elf.dir/src/arch/x86/64/traps.S.obj CMakeFiles/kernel.elf.dir/src/arch/x86/64/head.S.obj CMakeFiles/kernel.elf.dir/kernel_all.c.obj -o kernel.elf   && :
